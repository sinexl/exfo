extern "C" func printf(char_ptr, ...): void;

func set_value(p: int*, value: int): void {
    *p = value;
}

func set_pointer(pp: int**, new_target: int*): void {
    *pp = new_target;
}

func swap_ptrs(pp1: int**, pp2: int**): void {
    temp := *pp1;
    *pp1 = *pp2;
    *pp2 = temp;
}

func main(): int {
    a := 111;
    b := 222;

    pa := &a;
    pb := &b;

    ppa := &pa;
    ppb := &pb;

    printf("Initial values:\n");
    printf("a     = %d, b     = %d\n", a, b);
    printf("*pa   = %d, *pb   = %d\n", *pa, *pb);
    printf("**ppa = %d, **ppb = %d\n", **ppa, **ppb);

    printf("\n");

    set_value(pa, 500);
    printf("After set_value(pa, 500): a = %d\n", a);

    printf("\n");

    set_value(*ppa, 700);
    printf("After set_value(*ppa, 700): a = %d\n", a);

    printf("\n");

    set_pointer(ppa, pb);
    printf("After set_pointer(ppa, pb):\n");
    printf("  *pa = %d\n", *pa);

    printf("\n");

    set_pointer(ppb, &a);
    printf("After set_pointer(ppb, &a):\n");
    printf("  *pb = %d\n", *pb);

    printf("\n");

    swap_ptrs(ppa, ppb);
    printf("After swap_ptrs(ppa, ppb):\n");
    printf("*pa = %d, *pb = %d\n", *pa, *pb);

    return 0;
}
